var settings = require('../../config/settings');
var https = require('https');
var net = require('net');
var moment = require('moment');

module.exports =  {
    league: function (req, res, next) {

        var parse = '[{"Id":18,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/amerika-major-ligi/44/panorama","Order":-1,"Key":"1_44","Name":"amerika major ligi","MatchCount":11},{"Id":0,"Href":"/tr/futbol/amerika-acik-kupasi/181/panorama","Order":-1,"Key":"1_181","Name":"amerika açık kupası","MatchCount":0}],"MatchCount":11,"Key":null,"Name":null}],"MatchCount":11,"Key":"1_18","Name":"A.B.D"},{"Id":8,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/almanya-bundesliga-ligi/5/panorama","Order":-1,"Key":"1_5","Name":"almanya bundesliga ligi","MatchCount":10},{"Id":0,"Href":"/tr/futbol/almanya-bundesliga-2-ligi/14/panorama","Order":-1,"Key":"1_14","Name":"almanya bundesliga 2. ligi","MatchCount":4},{"Id":0,"Href":"/tr/futbol/almanya-federasyon-kupasi/53/panorama","Order":-1,"Key":"1_53","Name":"almanya federasyon kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/almanya-super-kupasi/268/panorama","Order":-1,"Key":"1_268","Name":"almanya süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/almanya-3-ligi/272/panorama","Order":-1,"Key":"1_272","Name":"almanya 3. ligi","MatchCount":8}],"MatchCount":22,"Key":null,"Name":null}],"MatchCount":22,"Key":"1_8","Name":"Almanya"},{"Id":43,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/arjantin-super-ligi/42/panorama","Order":-1,"Key":"1_42","Name":"arjantin süper ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/arjantin-primera-a-apertura/357/panorama","Order":-1,"Key":"1_357","Name":"arjantin primera a - apertura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/arjantin-primera-a-clausura/358/panorama","Order":-1,"Key":"1_358","Name":"arjantin primera a - clausura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/arjantin-kupasi/401/panorama","Order":-1,"Key":"1_401","Name":"arjantin kupası","MatchCount":1},{"Id":0,"Href":"/tr/futbol/arjantin-super-kupasi/421/panorama","Order":-1,"Key":"1_421","Name":"arjantin süper kupası","MatchCount":0}],"MatchCount":1,"Key":null,"Name":null}],"MatchCount":1,"Key":"1_43","Name":"Arjantin"},{"Id":6,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/avustralya-1-ligi/141/panorama","Order":-1,"Key":"1_141","Name":"avustralya 1. ligi","MatchCount":2},{"Id":0,"Href":"/tr/futbol/avustralya-kupasi/512/panorama","Order":-1,"Key":"1_512","Name":"avustralya kupası","MatchCount":0}],"MatchCount":2,"Key":null,"Name":null}],"MatchCount":2,"Key":"1_6","Name":"Avustralya"},{"Id":34,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/avusturya-bundesliga-ligi/39/panorama","Order":-1,"Key":"1_39","Name":"avusturya bundesliga ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/avusturya-1-ligi/40/panorama","Order":-1,"Key":"1_40","Name":"avusturya 1. ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/avusturya-kupasi/101/panorama","Order":-1,"Key":"1_101","Name":"avusturya kupası","MatchCount":0}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_34","Name":"Avusturya"},{"Id":51,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/belarus-1-ligi/109/panorama","Order":-1,"Key":"1_109","Name":"belarus 1. ligi","MatchCount":6},{"Id":0,"Href":"/tr/futbol/belarus-kupasi/229/panorama","Order":-1,"Key":"1_229","Name":"belarus kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/belarus-super-kupasi/450/panorama","Order":-1,"Key":"1_450","Name":"belarus süper kupası","MatchCount":0}],"MatchCount":6,"Key":null,"Name":null}],"MatchCount":6,"Key":"1_51","Name":"Belarus"},{"Id":16,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/belcika-1-ligi/88/panorama","Order":-1,"Key":"1_88","Name":"belçika 1. ligi","MatchCount":7},{"Id":0,"Href":"/tr/futbol/belcika-2-ligi/89/panorama","Order":-1,"Key":"1_89","Name":"belçika 2. ligi","MatchCount":4},{"Id":0,"Href":"/tr/futbol/belcika-kupasi/118/panorama","Order":-1,"Key":"1_118","Name":"belçika kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/belcika-super-kupasi/266/panorama","Order":-1,"Key":"1_266","Name":"belçika süper kupası","MatchCount":0}],"MatchCount":11,"Key":null,"Name":null}],"MatchCount":11,"Key":"1_16","Name":"Belçika"},{"Id":74,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/bolivya-premier-apertura/395/panorama","Order":-1,"Key":"1_395","Name":"bolivya premier - apertura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/bolivya-premier-clausura/396/panorama","Order":-1,"Key":"1_396","Name":"bolivya premier - clausura","MatchCount":6}],"MatchCount":6,"Key":null,"Name":null}],"MatchCount":6,"Key":"1_74","Name":"Bolivya"},{"Id":45,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/brezilya-serie-a/35/panorama","Order":-1,"Key":"1_35","Name":"brezilya serie a ","MatchCount":10},{"Id":0,"Href":"/tr/futbol/brezilya-serie-b/36/panorama","Order":-1,"Key":"1_36","Name":"brezilya serie b","MatchCount":6},{"Id":0,"Href":"/tr/futbol/brezilya-kupasi/66/panorama","Order":-1,"Key":"1_66","Name":"brezilya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/brezilya-paulista-a1/134/panorama","Order":-1,"Key":"1_134","Name":"brezilya paulista a1","MatchCount":0}],"MatchCount":16,"Key":null,"Name":null}],"MatchCount":16,"Key":"1_45","Name":"Brezilya"},{"Id":20,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/cek-1-ligi/113/panorama","Order":-1,"Key":"1_113","Name":"çek 1. ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/cek-cumhuriyeti-kupasi/251/panorama","Order":-1,"Key":"1_251","Name":"çek cumhuriyeti kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/cek-cum-super-kupasi/375/panorama","Order":-1,"Key":"1_375","Name":"çek cum. süper kupası","MatchCount":0}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_20","Name":"Çek Cumhuriyeti"},{"Id":116,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/cin-super-ligi/153/panorama","Order":-1,"Key":"1_153","Name":"çin süper ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/cin-2-ligi/213/panorama","Order":-1,"Key":"1_213","Name":"çin 2. ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/cin-kupasi/502/panorama","Order":-1,"Key":"1_502","Name":"çin kupası","MatchCount":0}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_116","Name":"Çin"},{"Id":10,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/danimarka-super-ligi/17/panorama","Order":-1,"Key":"1_17","Name":"danimarka süper ligi","MatchCount":6},{"Id":0,"Href":"/tr/futbol/danimarka-kupasi/55/panorama","Order":-1,"Key":"1_55","Name":"danimarka kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/danimarka-1-ligi/248/panorama","Order":-1,"Key":"1_248","Name":"danimarka 1. ligi","MatchCount":6}],"MatchCount":12,"Key":null,"Name":null}],"MatchCount":12,"Key":"1_10","Name":"Danimarka"},{"Id":73,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/ekvador-primera-apertura/373/panorama","Order":-1,"Key":"1_373","Name":"ekvador primera - apertura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/ekvador-primera-clausura/374/panorama","Order":-1,"Key":"1_374","Name":"ekvador primera - clausura","MatchCount":6}],"MatchCount":6,"Key":null,"Name":null}],"MatchCount":6,"Key":"1_73","Name":"Ekvador"},{"Id":25,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/finlandiya-veikkausliiga/29/panorama","Order":-1,"Key":"1_29","Name":"finlandiya veikkausliiga","MatchCount":0},{"Id":0,"Href":"/tr/futbol/finlandiya-lig-kupasi/63/panorama","Order":-1,"Key":"1_63","Name":"finlandiya lig kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/finlandiya-kupasi/90/panorama","Order":-1,"Key":"1_90","Name":"finlandiya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/finlandiya-ykkonen-ligi/95/panorama","Order":-1,"Key":"1_95","Name":"finlandiya ykkönen ligi","MatchCount":5}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_25","Name":"Finlandiya"},{"Id":9,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/fransa-ligue-1/8/panorama","Order":-1,"Key":"1_8","Name":"fransa ligue 1","MatchCount":11},{"Id":0,"Href":"/tr/futbol/fransa-ligue-2/13/panorama","Order":-1,"Key":"1_13","Name":"fransa ligue 2","MatchCount":2},{"Id":0,"Href":"/tr/futbol/fransa-kupasi/51/panorama","Order":-1,"Key":"1_51","Name":"fransa kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/fransa-lig-kupasi/52/panorama","Order":-1,"Key":"1_52","Name":"fransa lig kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/fransa-super-kupasi/150/panorama","Order":-1,"Key":"1_150","Name":"fransa süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/fransa-ulusal-ligi/311/panorama","Order":-1,"Key":"1_311","Name":"fransa ulusal ligi","MatchCount":0}],"MatchCount":13,"Key":null,"Name":null}],"MatchCount":13,"Key":"1_9","Name":"Fransa"},{"Id":81,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/guney-kore-k-ligi/130/panorama","Order":-1,"Key":"1_130","Name":"güney kore k-ligi","MatchCount":3},{"Id":0,"Href":"/tr/futbol/guney-kore-2-ligi/224/panorama","Order":-1,"Key":"1_224","Name":"güney kore 2. ligi","MatchCount":2},{"Id":0,"Href":"/tr/futbol/guney-kore-federasyon-kupasi/260/panorama","Order":-1,"Key":"1_260","Name":"güney kore federasyon kupası","MatchCount":0}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_81","Name":"Güney Kore"},{"Id":40,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/hirvatistan-1-ligi/112/panorama","Order":-1,"Key":"1_112","Name":"hırvatistan 1. ligi","MatchCount":4},{"Id":0,"Href":"/tr/futbol/hirvatistan-kupasi/249/panorama","Order":-1,"Key":"1_249","Name":"hırvatistan kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/hirvatistan-super-kupasi/441/panorama","Order":-1,"Key":"1_441","Name":"hırvatistan süper kupası","MatchCount":0}],"MatchCount":4,"Key":null,"Name":null}],"MatchCount":4,"Key":"1_40","Name":"Hırvatistan"},{"Id":13,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/hollanda-eredivisie-ligi/15/panorama","Order":-1,"Key":"1_15","Name":"hollanda eredivisie ligi","MatchCount":9},{"Id":0,"Href":"/tr/futbol/hollanda-jupiler-ligi/16/panorama","Order":-1,"Key":"1_16","Name":"hollanda jupiler ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/hollanda-kupasi/102/panorama","Order":-1,"Key":"1_102","Name":"hollanda kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/hollanda-super-kupasi/151/panorama","Order":-1,"Key":"1_151","Name":"hollanda süper kupası","MatchCount":0}],"MatchCount":9,"Key":null,"Name":null}],"MatchCount":9,"Key":"1_13","Name":"Hollanda"},{"Id":2,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/ingiltere-premier-ligi/2/panorama","Order":-1,"Key":"1_2","Name":"ingiltere premier ligi","MatchCount":11},{"Id":0,"Href":"/tr/futbol/ingiltere-sampiyonluk-ligi/9/panorama","Order":-1,"Key":"1_9","Name":"ingiltere şampiyonluk ligi","MatchCount":12},{"Id":0,"Href":"/tr/futbol/ingiltere-1-ligi/10/panorama","Order":-1,"Key":"1_10","Name":"ingiltere 1. ligi","MatchCount":12},{"Id":0,"Href":"/tr/futbol/ingiltere-2-ligi/11/panorama","Order":-1,"Key":"1_11","Name":"ingiltere 2. ligi","MatchCount":12},{"Id":0,"Href":"/tr/futbol/ingiltere-federasyon-kupasi/45/panorama","Order":-1,"Key":"1_45","Name":"ingiltere federasyon kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/ingiltere-lig-kupasi/46/panorama","Order":-1,"Key":"1_46","Name":"ingiltere lig kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/ingiltere-trophy-kupasi/47/panorama","Order":-1,"Key":"1_47","Name":"ingiltere trophy kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/ingiltere-ulusal-ligi/85/panorama","Order":-1,"Key":"1_85","Name":"ingiltere ulusal ligi","MatchCount":12},{"Id":0,"Href":"/tr/futbol/ingiltere-community-shield-kupasi/263/panorama","Order":-1,"Key":"1_263","Name":"ingiltere community shield kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/ingiltere-federasyon-trophy-kupasi/514/panorama","Order":-1,"Key":"1_514","Name":"ingiltere federasyon trophy kupası","MatchCount":0}],"MatchCount":59,"Key":null,"Name":null}],"MatchCount":59,"Key":"1_2","Name":"İngiltere"},{"Id":41,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/irlanda-premier-ligi/41/panorama","Order":-1,"Key":"1_41","Name":"irlanda premier ligi","MatchCount":1},{"Id":0,"Href":"/tr/futbol/irlanda-fai-kupasi/67/panorama","Order":-1,"Key":"1_67","Name":"irlanda faı kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/irlanda-lig-kupasi/68/panorama","Order":-1,"Key":"1_68","Name":"irlanda lig kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/setanta-kupasi/69/panorama","Order":-1,"Key":"1_69","Name":"setanta kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/irlanda-1-ligi/92/panorama","Order":-1,"Key":"1_92","Name":"irlanda 1. ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/irlanda-super-kupasi/453/panorama","Order":-1,"Key":"1_453","Name":"irlanda süper kupası","MatchCount":0}],"MatchCount":1,"Key":null,"Name":null}],"MatchCount":1,"Key":"1_41","Name":"İrlanda"},{"Id":17,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/iskocya-premier-ligi/24/panorama","Order":-1,"Key":"1_24","Name":"iskoçya premier ligi","MatchCount":3},{"Id":0,"Href":"/tr/futbol/iskocya-sampiyonluk-ligi/27/panorama","Order":-1,"Key":"1_27","Name":"iskoçya şampiyonluk ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/iskocya-lig-kupasi/57/panorama","Order":-1,"Key":"1_57","Name":"iskoçya lig kupası","MatchCount":1},{"Id":0,"Href":"/tr/futbol/iskocya-kupasi/58/panorama","Order":-1,"Key":"1_58","Name":"iskoçya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/iskocya-challenge-kupasi/59/panorama","Order":-1,"Key":"1_59","Name":"iskoçya challenge kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/iskocya-1-ligi/86/panorama","Order":-1,"Key":"1_86","Name":"iskoçya 1. ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/iskocya-2-ligi/87/panorama","Order":-1,"Key":"1_87","Name":"iskoçya 2. ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/iskocya-development-league-2/522/panorama","Order":-1,"Key":"1_522","Name":"iskoçya development league 2","MatchCount":0}],"MatchCount":19,"Key":null,"Name":null}],"MatchCount":19,"Key":"1_17","Name":"İskoçya"},{"Id":3,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/ispanya-la-liga/7/panorama","Order":-1,"Key":"1_7","Name":"ispanya la liga","MatchCount":13},{"Id":0,"Href":"/tr/futbol/ispanya-kral-kupasi/48/panorama","Order":-1,"Key":"1_48","Name":"ispanya kral kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/ispanya-la-liga-2/84/panorama","Order":-1,"Key":"1_84","Name":"ispanya la liga 2","MatchCount":10},{"Id":0,"Href":"/tr/futbol/ispanya-super-kupasi/148/panorama","Order":-1,"Key":"1_148","Name":"ispanya süper kupası","MatchCount":0}],"MatchCount":23,"Key":null,"Name":null}],"MatchCount":23,"Key":"1_3","Name":"İspanya"},{"Id":11,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/isvec-allsvenskan-ligi/20/panorama","Order":-1,"Key":"1_20","Name":"isveç allsvenskan ligi","MatchCount":8},{"Id":0,"Href":"/tr/futbol/isvec-superettan-ligi/21/panorama","Order":-1,"Key":"1_21","Name":"isveç superettan ligi","MatchCount":7},{"Id":0,"Href":"/tr/futbol/isvec-kupasi/98/panorama","Order":-1,"Key":"1_98","Name":"isveç kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/isvec-super-kupasi/145/panorama","Order":-1,"Key":"1_145","Name":"isveç süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/isvec-1-ligi/308/panorama","Order":-1,"Key":"1_308","Name":"isveç 1. ligi","MatchCount":5}],"MatchCount":20,"Key":null,"Name":null}],"MatchCount":20,"Key":"1_11","Name":"İsveç"},{"Id":36,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/isvicre-super-ligi/38/panorama","Order":-1,"Key":"1_38","Name":"isviçre süper ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/isvicre-kupasi/123/panorama","Order":-1,"Key":"1_123","Name":"isviçre kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/isvicre-challenge-ligi/252/panorama","Order":-1,"Key":"1_252","Name":"isviçre challenge ligi","MatchCount":4}],"MatchCount":9,"Key":null,"Name":null}],"MatchCount":9,"Key":"1_36","Name":"İsviçre"},{"Id":7,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/italya-serie-a-ligi/6/panorama","Order":-1,"Key":"1_6","Name":"italya serie a ligi","MatchCount":13},{"Id":0,"Href":"/tr/futbol/italya-serie-b-ligi/12/panorama","Order":-1,"Key":"1_12","Name":"italya serie b ligi","MatchCount":9},{"Id":0,"Href":"/tr/futbol/italya-kupasi/49/panorama","Order":-1,"Key":"1_49","Name":"italya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/italya-super-kupasi/149/panorama","Order":-1,"Key":"1_149","Name":"italya süper kupası","MatchCount":0}],"MatchCount":22,"Key":null,"Name":null}],"MatchCount":22,"Key":"1_7","Name":"İtalya"},{"Id":63,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/izlanda-premier-ligi/43/panorama","Order":-1,"Key":"1_43","Name":"izlanda premier ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/izlanda-kupasi/70/panorama","Order":-1,"Key":"1_70","Name":"izlanda kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/izlanda-2-ligi/223/panorama","Order":-1,"Key":"1_223","Name":"izlanda 2. ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/izlanda-lig-kupasi/465/panorama","Order":-1,"Key":"1_465","Name":"izlanda lig kupası","MatchCount":0}],"MatchCount":0,"Key":null,"Name":null}],"MatchCount":0,"Key":"1_63","Name":"İzlanda"},{"Id":26,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/japonya-j-1-ligi/33/panorama","Order":-1,"Key":"1_33","Name":"japonya j-1 ligi","MatchCount":1},{"Id":0,"Href":"/tr/futbol/japonya-lig-kupasi/64/panorama","Order":-1,"Key":"1_64","Name":"japonya lig kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/japonya-super-kupasi/143/panorama","Order":-1,"Key":"1_143","Name":"japonya süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/japonya-j-2-ligi/147/panorama","Order":-1,"Key":"1_147","Name":"japonya j-2 ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/japonya-imparatorluk-kupasi/283/panorama","Order":-1,"Key":"1_283","Name":"japonya imparatorluk kupası","MatchCount":0}],"MatchCount":6,"Key":null,"Name":null}],"MatchCount":6,"Key":"1_26","Name":"Japonya"},{"Id":71,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/kolombiya-primera-apertura/365/panorama","Order":-1,"Key":"1_365","Name":"kolombiya primera - apertura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/kolombiya-primera-clausura/366/panorama","Order":-1,"Key":"1_366","Name":"kolombiya primera - clausura","MatchCount":8},{"Id":0,"Href":"/tr/futbol/kolombiya-kupasi/469/panorama","Order":-1,"Key":"1_469","Name":"kolombiya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/kolombiya-super-kupasi/496/panorama","Order":-1,"Key":"1_496","Name":"kolombiya süper kupası","MatchCount":0}],"MatchCount":8,"Key":null,"Name":null}],"MatchCount":8,"Key":"1_71","Name":"Kolombiya"},{"Id":27,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/macaristan-1-ligi/108/panorama","Order":-1,"Key":"1_108","Name":"macaristan 1. ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/macaristan-kupasi/407/panorama","Order":-1,"Key":"1_407","Name":"macaristan kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/macaristan-super-kupasi/409/panorama","Order":-1,"Key":"1_409","Name":"macaristan süper kupası","MatchCount":0}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_27","Name":"Macaristan"},{"Id":106,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/meksika-premier-lig-apertura/359/panorama","Order":-1,"Key":"1_359","Name":"meksika premier lig - apertura","MatchCount":7},{"Id":0,"Href":"/tr/futbol/meksika-premier-ligi-clausura/360/panorama","Order":-1,"Key":"1_360","Name":"meksika premier ligi - clausura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/meksika-super-kupasi/459/panorama","Order":-1,"Key":"1_459","Name":"meksika süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/campeon-de-campeones/520/panorama","Order":-1,"Key":"1_520","Name":"campeon de campeones","MatchCount":0}],"MatchCount":7,"Key":null,"Name":null}],"MatchCount":7,"Key":"1_106","Name":"Meksika"},{"Id":12,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/norvec-eliteserien/18/panorama","Order":-1,"Key":"1_18","Name":"norveç eliteserien","MatchCount":8},{"Id":0,"Href":"/tr/futbol/norvec-1-ligi/19/panorama","Order":-1,"Key":"1_19","Name":"norveç 1. ligi","MatchCount":7},{"Id":0,"Href":"/tr/futbol/norvec-kupasi/103/panorama","Order":-1,"Key":"1_103","Name":"norveç kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/norvec-super-kupasi/146/panorama","Order":-1,"Key":"1_146","Name":"norveç süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/norvec-2-ligi/312/panorama","Order":-1,"Key":"1_312","Name":"norveç 2. ligi","MatchCount":0}],"MatchCount":15,"Key":null,"Name":null}],"MatchCount":15,"Key":"1_12","Name":"Norveç"},{"Id":75,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/paraguay-1-ligi-apertura/367/panorama","Order":-1,"Key":"1_367","Name":"paraguay 1.ligi - apertura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/paraguay-1-ligi-clausura/368/panorama","Order":-1,"Key":"1_368","Name":"paraguay 1.ligi - clausura","MatchCount":4}],"MatchCount":4,"Key":null,"Name":null}],"MatchCount":4,"Key":"1_75","Name":"Paraguay"},{"Id":76,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/peru-primera-apertura/470/panorama","Order":-1,"Key":"1_470","Name":"peru primera - apertura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/peru-primera-clausura/471/panorama","Order":-1,"Key":"1_471","Name":"peru primera - clausura","MatchCount":6},{"Id":0,"Href":"/tr/futbol/peru-primera-liguilla/504/panorama","Order":-1,"Key":"1_504","Name":"peru primera - liguilla","MatchCount":0},{"Id":0,"Href":"/tr/futbol/peru-primera-torneo-verano/515/panorama","Order":-1,"Key":"1_515","Name":"peru primera - torneo verano","MatchCount":0}],"MatchCount":6,"Key":null,"Name":null}],"MatchCount":6,"Key":"1_76","Name":"Peru"},{"Id":42,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/polonya-ekstraklasa/154/panorama","Order":-1,"Key":"1_154","Name":"polonya ekstraklasa","MatchCount":6},{"Id":0,"Href":"/tr/futbol/polonya-1-ligi/200/panorama","Order":-1,"Key":"1_200","Name":"polonya 1. ligi","MatchCount":8},{"Id":0,"Href":"/tr/futbol/polonya-kupasi/245/panorama","Order":-1,"Key":"1_245","Name":"polonya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/polonya-super-kupasi/408/panorama","Order":-1,"Key":"1_408","Name":"polonya süper kupası","MatchCount":0}],"MatchCount":14,"Key":null,"Name":null}],"MatchCount":14,"Key":"1_42","Name":"Polonya"},{"Id":15,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/portekiz-super-ligi/22/panorama","Order":-1,"Key":"1_22","Name":"portekiz süper ligi","MatchCount":9},{"Id":0,"Href":"/tr/futbol/portekiz-2-ligi/23/panorama","Order":-1,"Key":"1_23","Name":"portekiz 2.ligi","MatchCount":9},{"Id":0,"Href":"/tr/futbol/portekiz-lig-kupasi/56/panorama","Order":-1,"Key":"1_56","Name":"portekiz lig kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/portekiz-kupasi/125/panorama","Order":-1,"Key":"1_125","Name":"portekiz kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/portekiz-super-kupasi/269/panorama","Order":-1,"Key":"1_269","Name":"portekiz süper kupası","MatchCount":0}],"MatchCount":18,"Key":null,"Name":null}],"MatchCount":18,"Key":"1_15","Name":"Portekiz"},{"Id":22,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/romanya-liga-1/106/panorama","Order":-1,"Key":"1_106","Name":"romanya liga 1","MatchCount":5},{"Id":0,"Href":"/tr/futbol/romanya-kupasi/246/panorama","Order":-1,"Key":"1_246","Name":"romanya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/romanya-super-kupasi/305/panorama","Order":-1,"Key":"1_305","Name":"romanya süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/romanya-lig-kupasi/460/panorama","Order":-1,"Key":"1_460","Name":"romanya lig kupası","MatchCount":0}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_22","Name":"Romanya"},{"Id":23,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/rusya-premier-ligi/28/panorama","Order":-1,"Key":"1_28","Name":"rusya premier ligi","MatchCount":6},{"Id":0,"Href":"/tr/futbol/rusya-kupasi/61/panorama","Order":-1,"Key":"1_61","Name":"rusya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/rusya-super-kupasi/144/panorama","Order":-1,"Key":"1_144","Name":"rusya süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/rusya-1-ligi/177/panorama","Order":-1,"Key":"1_177","Name":"rusya 1. ligi","MatchCount":5}],"MatchCount":11,"Key":null,"Name":null}],"MatchCount":11,"Key":"1_23","Name":"Rusya"},{"Id":56,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/slovakya-super-ligi/156/panorama","Order":-1,"Key":"1_156","Name":"slovakya süper ligi","MatchCount":6}],"MatchCount":6,"Key":null,"Name":null}],"MatchCount":6,"Key":"1_56","Name":"Slovakya"},{"Id":70,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/sili-primera-ligi/174/panorama","Order":-1,"Key":"1_174","Name":"şili primera ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/sili-primera-apertura/363/panorama","Order":-1,"Key":"1_363","Name":"şili primera - apertura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/sili-primera-clausura/364/panorama","Order":-1,"Key":"1_364","Name":"şili primera - clausura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/sili-super-kupasi/479/panorama","Order":-1,"Key":"1_479","Name":"şili süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/sili-gecis-ligi/521/panorama","Order":-1,"Key":"1_521","Name":"şili geçiş ligi","MatchCount":8}],"MatchCount":8,"Key":null,"Name":null}],"MatchCount":8,"Key":"1_70","Name":"Şili"},{"Id":1,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/super-lig/1/panorama","Order":-1,"Key":"1_1","Name":"süper lig","MatchCount":8},{"Id":0,"Href":"/tr/futbol/tff-1-lig/4/panorama","Order":-1,"Key":"1_4","Name":"tff 1. lig","MatchCount":6},{"Id":0,"Href":"/tr/futbol/ziraat-turkiye-kupasi/71/panorama","Order":-1,"Key":"1_71","Name":"ziraat türkiye kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/tff-2-lig/80/panorama","Order":-1,"Key":"1_80","Name":"tff 2. lig","MatchCount":7},{"Id":0,"Href":"/tr/futbol/turkiye-super-kupasi/81/panorama","Order":-1,"Key":"1_81","Name":"türkiye süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/tff-3-lig/83/panorama","Order":-1,"Key":"1_83","Name":"tff 3. lig","MatchCount":4},{"Id":0,"Href":"/tr/futbol/tsyd-kupasi/270/panorama","Order":-1,"Key":"1_270","Name":"tsyd kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/spor-toto-kupasi/400/panorama","Order":-1,"Key":"1_400","Name":"spor toto kupası","MatchCount":0}],"MatchCount":25,"Key":null,"Name":null}],"MatchCount":25,"Key":"1_1","Name":"Türkiye"},{"Id":47,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/ukrayna-premier-ligi/105/panorama","Order":-1,"Key":"1_105","Name":"ukrayna premier ligi","MatchCount":5},{"Id":0,"Href":"/tr/futbol/ukrayna-kupasi/186/panorama","Order":-1,"Key":"1_186","Name":"ukrayna kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/ukrayna-super-kupasi/345/panorama","Order":-1,"Key":"1_345","Name":"ukrayna süper kupası","MatchCount":0}],"MatchCount":5,"Key":null,"Name":null}],"MatchCount":5,"Key":"1_47","Name":"Ukrayna"},{"Id":14,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/afc-sampiyonlar-ligi/343/panorama","Order":-1,"Key":"1_343","Name":"afc şampiyonlar ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/afrika-uluslar-kupasi/78/panorama","Order":-1,"Key":"1_78","Name":"afrika uluslar kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/asya-kupasi/327/panorama","Order":-1,"Key":"1_327","Name":"asya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/asya-kupasi-elemeleri/120/panorama","Order":-1,"Key":"1_120","Name":"asya kupası elemeleri","MatchCount":0},{"Id":0,"Href":"/tr/futbol/avrupa-futbol-sampiyonasi/75/panorama","Order":-1,"Key":"1_75","Name":"avrupa futbol şampiyonası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/avrupa-sampiyonasi-elemeleri/323/panorama","Order":-1,"Key":"1_323","Name":"avrupa şampiyonası elemeleri","MatchCount":0},{"Id":0,"Href":"/tr/futbol/concacaf-altin-kupa-sampiyonasi/184/panorama","Order":-1,"Key":"1_184","Name":"concacaf altın kupa şampiyonası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/concacaf-sampiyonlar-ligi/100/panorama","Order":-1,"Key":"1_100","Name":"concacaf şampiyonlar ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/copa-america/76/panorama","Order":-1,"Key":"1_76","Name":"copa america","MatchCount":0},{"Id":0,"Href":"/tr/futbol/dunya-kupasi/79/panorama","Order":-1,"Key":"1_79","Name":"dünya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/dunya-kupasi-afrika-elemeleri/377/panorama","Order":-1,"Key":"1_377","Name":"dünya kupası - afrika elemeleri","MatchCount":0},{"Id":0,"Href":"/tr/futbol/dunya-kupasi-asya-elemeleri/376/panorama","Order":-1,"Key":"1_376","Name":"dünya kupası - asya elemeleri","MatchCount":0},{"Id":0,"Href":"/tr/futbol/dunya-kupasi-avrupa-elemeleri/328/panorama","Order":-1,"Key":"1_328","Name":"dünya kupası - avrupa elemeleri","MatchCount":4},{"Id":0,"Href":"/tr/futbol/dunya-kupasi-concacaf-elemeleri/378/panorama","Order":-1,"Key":"1_378","Name":"dünya kupası - concacaf elemeleri","MatchCount":0},{"Id":0,"Href":"/tr/futbol/dunya-kupasi-guney-amerika-elemeleri/379/panorama","Order":-1,"Key":"1_379","Name":"dünya kupası - güney amerika elemeleri","MatchCount":0},{"Id":0,"Href":"/tr/futbol/dunya-kupasi-kitalararasi-play-off/447/panorama","Order":-1,"Key":"1_447","Name":"dünya kupası - kıtalararası play-off","MatchCount":0},{"Id":0,"Href":"/tr/futbol/fifa-kulupler-dunya-sampiyonasi/126/panorama","Order":-1,"Key":"1_126","Name":"fıfa kulüpler dünya şampiyonası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/guney-amerika-kupasi/93/panorama","Order":-1,"Key":"1_93","Name":"güney amerika kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/guney-amerika-super-kupasi/271/panorama","Order":-1,"Key":"1_271","Name":"güney amerika süper kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/hazirlik-karsilasmalari/99/panorama","Order":-1,"Key":"1_99","Name":"hazırlık karşılaşmaları","MatchCount":0},{"Id":0,"Href":"/tr/futbol/kadinlar-avrupa-sampiyonasi/96/panorama","Order":-1,"Key":"1_96","Name":"kadınlar avrupa şampiyonası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/kadinlar-dunya-kupasi/350/panorama","Order":-1,"Key":"1_350","Name":"kadınlar dünya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/konfederasyon-kupasi/77/panorama","Order":-1,"Key":"1_77","Name":"konfederasyon kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/kuzey-amerika-super-ligi/264/panorama","Order":-1,"Key":"1_264","Name":"kuzey amerika süper ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/libertadores-kupasi/73/panorama","Order":-1,"Key":"1_73","Name":"libertadores kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/olimpiyat-oyunlari/402/panorama","Order":-1,"Key":"1_402","Name":"olimpiyat oyunları","MatchCount":0},{"Id":0,"Href":"/tr/futbol/olimpiyat-oyunlari-k/405/panorama","Order":-1,"Key":"1_405","Name":"olimpiyat oyunları (k)","MatchCount":0},{"Id":0,"Href":"/tr/futbol/supercopa-euroamericana/466/panorama","Order":-1,"Key":"1_466","Name":"supercopa euroamericana","MatchCount":0},{"Id":0,"Href":"/tr/futbol/sampiyonlar-ligi/3/panorama","Order":-1,"Key":"1_3","Name":"şampiyonlar ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/u17-avrupa-sampiyonasi/172/panorama","Order":-1,"Key":"1_172","Name":"u17 avrupa şampiyonası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/u17-dunya-kupasi/119/panorama","Order":-1,"Key":"1_119","Name":"u17 dünya kupası","MatchCount":3},{"Id":0,"Href":"/tr/futbol/u19-avrupa-sampiyonasi/265/panorama","Order":-1,"Key":"1_265","Name":"u19 avrupa şampiyonası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/u20-dunya-kupasi/117/panorama","Order":-1,"Key":"1_117","Name":"u20 dünya kupası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/u21-avrupa-sampiyonasi/334/panorama","Order":-1,"Key":"1_334","Name":"u21 avrupa şampiyonası","MatchCount":0},{"Id":0,"Href":"/tr/futbol/u21-avrupa-sampiyonasi-elemeleri/97/panorama","Order":-1,"Key":"1_97","Name":"u21 avrupa şampiyonası elemeleri","MatchCount":0},{"Id":0,"Href":"/tr/futbol/uefa-avrupa-ligi/351/panorama","Order":-1,"Key":"1_351","Name":"uefa avrupa ligi","MatchCount":0},{"Id":0,"Href":"/tr/futbol/uefa-super-kupa/91/panorama","Order":-1,"Key":"1_91","Name":"uefa süper kupa","MatchCount":0}],"MatchCount":7,"Key":null,"Name":null}],"MatchCount":7,"Key":"1_14","Name":"Uluslararası"},{"Id":72,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/uruguay-primera-clausura/372/panorama","Order":-1,"Key":"1_372","Name":"uruguay primera - clausura","MatchCount":0},{"Id":0,"Href":"/tr/futbol/uruguay-primera-intermedio/516/panorama","Order":-1,"Key":"1_516","Name":"uruguay primera - ıntermedio","MatchCount":0}],"MatchCount":0,"Key":null,"Name":null}],"MatchCount":0,"Key":"1_72","Name":"Uruguay"},{"Id":33,"List":[{"List":[{"Id":0,"Href":"/tr/futbol/yunanistan-super-ligi/34/panorama","Order":-1,"Key":"1_34","Name":"yunanistan süper ligi","MatchCount":8},{"Id":0,"Href":"/tr/futbol/yunanistan-kupasi/133/panorama","Order":-1,"Key":"1_133","Name":"yunanistan kupası","MatchCount":0}],"MatchCount":8,"Key":null,"Name":null}],"MatchCount":8,"Key":"1_33","Name":"Yunanistan"}]';

        var obj = JSON.parse(parse);
        obj.forEach(function (country) {
           req.models.country.create({
              countryId : country.Id,
              title : country.Name,
              token : country.Key,
           },function (errr) {
               console.log(errr);
           });
           country.List.forEach(function (lig2) {
               lig2.List.forEach(function (lig) {
                   req.models.league.create({
                       countryId: country.Id,
                       title: lig.Name,
                       token: lig.Key
                   }, function (error) {
                       console.log(error)
                   })
               });
           });
        });
        res.json({
            message: "v1",
            date: new Date().getTime()
        })
    },
    team: function (req,res,next) {

        req.models.league.findAsync().then(function(results){
            results.forEach(function (league) {

                https.get("https://istatistik.oley.com/tr/futbol/super-lig/"+(league.token.split("_")[1])+"/puan-durumu", function(response) {
                    console.log("https://istatistik.oley.com/tr/futbol/super-lig/"+(league.token.split("_")[1])+"/puan-durumu");
                    var str = "";
                    response.on('data', function (chunk) {
                        str += chunk;
                    })
                    response.on('end', function () {
                        console.log("end  = https://istatistik.oley.com/tr/futbol/super-lig/"+(league.token.split("_")[1])+"/puan-durumu")
                        var tableReg = new RegExp(/new Table\((.*), "PUAN DURUMU"/);
                        var tableJson = String(str).match(tableReg);
                        var obj = JSON.parse(tableJson[1]);
                        if(obj == undefined || obj.count == 0 || obj[0] == undefined && obj[0].General == undefined){
                            return;
                        }
                        try{
                            obj[0].General[0].Items.forEach(function (item2) {
                                item2.Items.forEach(function (item) {
                                    console.log(item.TeamName);
                                    req.models.team.create({
                                        countryId: league.countryId,
                                        name: item.TeamName,
                                        token: item.TeamId,
                                        teamId: item.TeamId
                                    }, function (error,result) {
                                        console.log(error)
                                    });
                                    req.models.leagueTeam.create({
                                        leagueId : league.leagueId,
                                        teamId : item.TeamId
                                    },function (error2) {
                                        console.log(error2);
                                    })
                                });
                            });
                        }catch(e) {

                        }

                    });

                }).on('error',function (e) {
                    console.log(e.message);
                });
            });
        },function (errr) {
            console.log(errr);
        });

    },

    match:function (req,res,next) {
        https.get("https://bulletin.oley.com/data/bulletin-with-percentage?_=1", function(response) {
            var str = "";
            response.on('data', function (chunk) {
                str += chunk;
            })
            response.on('end', function () {
                console.log("https end");
                var obj = JSON.parse(str);
                obj.data.bulletin.football.eventList.forEach(function (matchItem) {
                    req.models.match.one({eventToken:matchItem.id},function(err,match) {
                        var split = matchItem.eventDate.split(".");
                        var datetime = moment(split[2]+ "-"+split[1]+"-"+split[0]+" "+ matchItem.eventHour).toDate();
                        if(match){
                            match.mbs = matchItem.mbs;
                            match.matchDate = datetime;
                            match.save();


                            matchItem.oddList.forEach(function (oddItem) {
                                 console.log(match);
                                var matchOddCreate = function (odd) {
                                    req.models.matchOdd.create({
                                        matchId : match.matchId,
                                        mbs : oddItem.mbs,
                                        oddId : odd.oddId,
                                        type: oddItem.type,
                                        value : oddItem.value
                                    },function (error) {
                                        console.log(error);
                                    })
                                };

                                req.models.odd.one({oddType:oddItem.type},function(err,odd) {
                                    if(!odd){
                                        req.models.odd.create({
                                            groupId: 0,
                                            name : "",
                                            oddType : oddItem.type
                                        },function(error2,result2){
                                            matchOddCreate({oddId : result2.oddId})
                                        });
                                    }else{
                                        matchOddCreate(odd);
                                    }
                                });
                            })

                        }else{
                            req.models.match.create({
                                matchDate : datetime ,
                                matchCode : matchItem.matchCode,
                                homeTeam : matchItem.homeTeam,
                                awayTeam : matchItem.awayTeam,
                                homeTeamId : matchItem.helperInfo.homeTeam.id,
                                awayTeamId : matchItem.helperInfo.awayTeam.id,
                                mbs : matchItem.mbs,
                                leagueId: matchItem.helperInfo.tournament.id,
                                leagueName :  matchItem.helperInfo.tournament.name,
                                eventToken : matchItem.id,
                                matchToken : matchItem.helperInfo.matchId,
                                countryId : matchItem.helperInfo.country.id,
                                country : matchItem.helperInfo.country.name
                            },function (error) {
                                console.log(error);
                            })
                        }
                    });
                });
            });
        });
    },

    live:function (req,res,next) {
        https.get("https://livescore.oley.com/LiveScore/DeltaData?sportId=1&languageId=1&packageNo=1", function(response) {
            var str = "";
            response.on('data', function (chunk) {
                str += chunk;
            })
            response.on('end', function () {
                console.log("https end");
                var obj = JSON.parse(str);
                obj.MatchList.forEach(function (matchItem) {
                    req.models.match.one({matchToken: matchItem.Id}, function (err, match) {
                        if(match){
                            match.halfScore = matchItem.Score_HT.replace(" ","");
                            match.score =  matchItem.HomeTeamScore_FT + "-"+  matchItem.AwayTeamScore_FT;
                            match.redCards = matchItem.HomeTeamRedCards + "-"+ matchItem.AwayTeamRedCards;
                            match.status = matchItem.StatusName;
                            match.save();
                        }
                    });
                });
            });
        });
    }
};
